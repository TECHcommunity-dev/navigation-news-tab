<script type="text/discourse-plugin" version="0.8">

api.addNavigationBarItem({
  name: "link-to-knowledge-base-category",
  displayName: "Knowledge base",
  title: "Knowledge base",
  
  init: (navItem, category) => {
  	if ( navItem.tagId ) { return; }
	navItem.href = `/tags/c/knowledge-base/${navItem.tagId}`;
  },
  customFilter: (category, args) => {
	const tag = args.tagId;
    const tagCheck = tag && tag !== "none" && tag !== "all";
    return tagCheck;
  },
  forceActive: (category, args, router) => {
    const categoryCheck = category && category.name === "Knowledge base";
    const urlCheck = router.currentURL.indexOf(`/c/knowledge-base/${args.tagId}`);
    const filterCheck = router.currentRouteName === "tags.showCategory";
    return categoryCheck && urlCheck && filterCheck;
  }
});


api.addNavigationBarItem({
  name: "link-to-forum-category",
  displayName: "Forum",
  title: "Questions, answers and discussions",
  init: (navItem, category) => {
	navItem.href = `/tags/c/forum/${navItem.tagId}`;
  },
  customFilter: (category, args) => {
	const tag = args.tagId;
    const tagCheck = tag && tag !== "none" && tag !== "all";
    return tagCheck;
  },
  forceActive: (category, args, router) => {
    const categoryCheck = category && category.name === "Forum";
    const urlCheck = router.currentURL.indexOf(`/c/forum/${args.tagId}`);
    const filterCheck = router.currentRouteName === "tags.showCategory";
    return categoryCheck && urlCheck && filterCheck;
  }
});
</script>
